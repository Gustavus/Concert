tinymce.PluginManager.add("filebrowser",function(a){var f=function(d,c,b,e){if("file"===b)a.windowManager.open({title:"Choose a page",url:Gustavus.Utility.URL.urlify("/concert/filebrowser/filebrowser.php",{filePath:Gustavus.Concert.filePath}),buttons:[{text:"Concert File Manager",onclick:function(){a.windowManager.close();return a.settings.origFileBrowserCallback(d,c,b,e)},icon:"browse",classes:"primary"}]},{setURL:function(b){a.windowManager.close();var c=e.document.getElementById(d);console.log(c,
b);c.value=a.convertURL(b);"createEvent"in document?(b=document.createEvent("HTMLEvents"),b.initEvent("change",!1,!0),c.dispatchEvent(b)):c.fireEvent("onchange")}});else if(a.settings.origFileBrowserCallback)return a.settings.origFileBrowserCallback(d,c,b,e)},g=function(d,c,b){if(b.filetype&&"file"===b.filetype)a.windowManager.open({title:"Choose a page",url:Gustavus.Utility.URL.urlify("/concert/filebrowser/filebrowser.php",{filePath:Gustavus.Concert.filePath}),buttons:[{text:"Concert File Manager",
onclick:function(){a.windowManager.close();return a.settings.origFilePickerCallback(d,c,b)},icon:"browse",classes:"primary"}]},{setURL:function(b){a.windowManager.close();d(a.convertURL(b),{text:b})}});else if(a.settings.origFilePickerCallback)return a.settings.origFilePickerCallback(d,c,b)};a.settings.file_picker_callback?(a.settings.origFilePickerCallback=a.settings.file_picker_callback,a.settings.file_picker_callback=g):a.settings.file_browser_callback&&(a.settings.origFileBrowserCallback=a.settings.file_browser_callback,
a.settings.file_browser_callback=f)});
