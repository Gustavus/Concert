tinymce.PluginManager.add("filebrowser",function(c){var f=function(d,b,a,e){if("file"===a)c.windowManager.open({title:"Choose a page",url:Gustavus.Utility.URL.urlify("/concert/filebrowser/filebrowser.php",{filePath:Gustavus.Concert.filePath}),buttons:[{text:"Concert File Manager",onclick:function(){c.windowManager.close();return tinymce.activeEditor.settings.origFileBrowserCallback(d,b,a,e)},icon:"browse",classes:"primary"}]},{setURL:function(a){c.windowManager.close();var b=e.document.getElementById(d);
b.value=c.convertURL(a);"createEvent"in document?(a=document.createEvent("HTMLEvents"),a.initEvent("change",!1,!0),b.dispatchEvent(a)):b.fireEvent("onchange")}});else if(tinymce.activeEditor.settings.origFileBrowserCallback)return tinymce.activeEditor.settings.origFileBrowserCallback(d,b,a,e)},g=function(d,b,a){if(a.filetype&&"file"===a.filetype)c.windowManager.open({title:"Choose a page",url:Gustavus.Utility.URL.urlify("/concert/filebrowser/filebrowser.php",{filePath:Gustavus.Concert.filePath}),
buttons:[{text:"Concert File Manager",onclick:function(){c.windowManager.close();return tinymce.activeEditor.settings.origFilePickerCallback(d,b,a)},icon:"browse",classes:"primary"}]},{setURL:function(a){c.windowManager.close();d(c.convertURL(a),{text:a})}});else if(tinymce.activeEditor.settings.origFilePickerCallback)return tinymce.activeEditor.settings.origFilePickerCallback(d,b,a)};tinymce.activeEditor.settings.file_picker_callback?(tinymce.activeEditor.settings.origFilePickerCallback=tinymce.activeEditor.settings.file_picker_callback,
tinymce.activeEditor.settings.file_picker_callback=g):tinymce.activeEditor.settings.file_browser_callback&&(tinymce.activeEditor.settings.origFileBrowserCallback=tinymce.activeEditor.settings.file_browser_callback,tinymce.activeEditor.settings.file_browser_callback=f)});
