tinymce.PluginManager.add("filebrowser",function(a){a.settings.origFileBrowserCallback=a.settings.file_browser_callback;a.settings.file_browser_callback=function(d,f,b,e){if("file"===b)a.windowManager.open({title:"Choose a page",url:Gustavus.Utility.URL.urlify("/concert/filebrowser/filebrowser.php",{filePath:Gustavus.Concert.filePath}),buttons:[{text:"Concert File Manager",onclick:function(){a.windowManager.close();return a.settings.origFileBrowserCallback(d,f,b,e)},icon:"browse",classes:"primary"}]},
{setURL:function(c){a.windowManager.close();var b=e.document.getElementById(d);b.value=a.convertURL(c);"createEvent"in document?(c=document.createEvent("HTMLEvents"),c.initEvent("change",!1,!0),b.dispatchEvent(c)):b.fireEvent("onchange")}});else if(a.settings.origFileBrowserCallback)return a.settings.origFileBrowserCallback(d,f,b,e)}});